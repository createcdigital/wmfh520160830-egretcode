var Main=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.onAddToStage=function(t){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("http://assetscdn.createcdigital.com/wmfh520160830/default.res.json","resource/")},i.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},i.onResourceLoadComplete=function(t){"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},i.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},i.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},i.createGameScene=function(){wmf.out_trade=egret.getOption("channel"),wmf.tracking("pv?out_trade="+wmf.out_trade);var t=egret.getOption("sharId");document.getElementById("openID").innerHTML;if(null!==t&&""!==t){var e=new Controller;this.addChild(e)}else{var e=new Controller;this.addChild(e)}},i.stargame=function(){if(wmf.loadgroup==wmf.loadtrue){this.removeEventListener(egret.Event.ENTER_FRAME,this.stargame,this);var t=new Controller;this.addChild(t)}},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var Controller=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.onAddtoStage,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.onAddtoStage=function(){this.comeUI=new comeUI,this.shareUI=new shareUI,this.comeUI.addEventListener(wmfEvent.TEST_STAR,this.textStar,this),this.comeUI.addEventListener(wmfEvent.SHAR_STAR,this.sharStar,this),this.addChild(this.comeUI)},i.textStar=function(){this.comeUI.removeEventListener(wmfEvent.TEST_STAR,this.textStar,this),this.comeUI.removeEventListener(wmfEvent.SHAR_STAR,this.sharStar,this),this.removeChild(this.comeUI),this.textUI=new textUI,this.addChild(this.textUI);var t=new musicUI;this.addChild(t)},i.sharStar=function(){this.comeUI.removeEventListener(wmfEvent.TEST_STAR,this.textStar,this),this.comeUI.removeEventListener(wmfEvent.SHAR_STAR,this.sharStar,this),this.removeChild(this.comeUI),this.shareUI.shareView(),this.addChild(this.shareUI);var t=new musicUI;this.addChild(t)},e}(egret.DisplayObjectContainer);egret.registerClass(Controller,"Controller");var getURL=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.getopenID,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.getopenID=function(){var t=""+wmf.sharOpenID,e=new egret.HttpRequest;e.responseType=egret.HttpResponseType.TEXT,e.open("http://wmfh5apislb.createcdigital.com/wuser/get/"+t,egret.HttpMethod.GET),e.send(),e.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),e.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this)},i.onGetComplete=function(t){var e=t.currentTarget,s=JSON.parse(e.response);""!=s?""==s[0].card_list?(this.resetURL=new resetURL,this.addChild(this.resetURL),this.getErr()):(wmf._Name=s[0].name,wmf._cardlist=s[0].card_list.split(","),wmf._Time=s[0].share_id,this.getType()):this.getNone()},i.onGetIOError=function(t){console.log("get error : "+t)},i.onGetProgress=function(t){console.log("get progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")},i.getType=function(){var t=new wmfEvent(wmfEvent.GET_TAPE);this.dispatchEvent(t)},i.getErr=function(){var t=new wmfEvent(wmfEvent.GET_ERR);this.dispatchEvent(t)},i.getNone=function(){var t=new wmfEvent(wmfEvent.GET_NONE);this.dispatchEvent(t)},e}(egret.DisplayObjectContainer);egret.registerClass(getURL,"getURL");var newopenIdURL=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.getopenID,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.getopenID=function(){var t=document.getElementById("isphone").innerHTML,e=document.getElementById("openID").innerHTML;"true"==t?e=wmf.openID:wmf.openID=e,wmf.sharOpenID=e;var s="?phone="+wmf._Phone+"&openid="+e,i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.open("http://wmfh5apislb.createcdigital.com/wuser/upopenid"+s,egret.HttpMethod.GET),i.send(),i.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),i.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this)},i.onGetComplete=function(t){var e=t.currentTarget,s=JSON.parse(e.response);""!=s&&this.postType()},i.onGetIOError=function(t){console.log("get error : "+t)},i.onGetProgress=function(t){console.log("get progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")},i.postType=function(){var t=new wmfEvent(wmfEvent.SUB_MIT);this.dispatchEvent(t)},e}(egret.DisplayObjectContainer);egret.registerClass(newopenIdURL,"newopenIdURL");var postURL=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.sendPostRequest,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.sendPostRequest=function(){var t=document.getElementById("isphone").innerHTML,e=wmf.openID,s=wmf._Time,i=wmf._Name,r=wmf._Phone;"true"==t&&(s=wmf._Phone,e=wmf._Phone);var n="?share_id="+s+"&name="+i+"&phone="+r+"&openid="+e,h=new egret.HttpRequest;h.responseType=egret.HttpResponseType.TEXT,h.open("http://wmfh5apislb.createcdigital.com/wuser/add"+n,egret.HttpMethod.GET),h.send(),h.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),h.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),h.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this)},i.onGetComplete=function(t){var e=t.currentTarget,s=JSON.parse(e.response);console.log(s),"success"==s.result?this.postType():this.postErr()},i.onGetIOError=function(t){console.log("post error : "+t),this.postErr()},i.onGetProgress=function(t){console.log("post progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")},i.postType=function(){var t=new wmfEvent(wmfEvent.SUB_MIT);this.dispatchEvent(t)},i.postErr=function(){var t=new wmfEvent(wmfEvent.SUB_MIT_ERR);this.dispatchEvent(t)},e}(egret.DisplayObjectContainer);egret.registerClass(postURL,"postURL");var resetURL=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.sendUpdate,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.sendUpdate=function(){var t=""+wmf.sharOpenID,e=new egret.HttpRequest;e.responseType=egret.HttpResponseType.TEXT,e.open("http://wmfh5apislb.createcdigital.com/wuser/reset/"+t,egret.HttpMethod.GET),e.send(),e.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),e.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this)},i.onGetComplete=function(t){var e=t.currentTarget,s=JSON.parse(e.response);"success"==s.result?(wmf.sharOpenID=wmf.openID,this.updateType()):"not found openid"==s.result?this.updateType():this.updatetErr()},i.onGetIOError=function(t){console.log("post error : "+t),this.updatetErr()},i.onGetProgress=function(t){console.log("post progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")},i.updateType=function(){var t=new wmfEvent(wmfEvent.REST_TAPE);this.dispatchEvent(t)},i.updatetErr=function(){var t=new wmfEvent(wmfEvent.REST_ERR);this.dispatchEvent(t)},e}(egret.DisplayObjectContainer);egret.registerClass(resetURL,"resetURL");var textgetURL=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.getopenID,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.getopenID=function(){var t=""+wmf._Phone,e=new egret.HttpRequest;e.responseType=egret.HttpResponseType.TEXT,e.open("http://wmfh5apislb.createcdigital.com/wuser/getbyphone/"+t,egret.HttpMethod.GET),e.send(),e.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),e.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this)},i.onGetComplete=function(t){var e=t.currentTarget,s=JSON.parse(e.response);""!=s?""==s[0].card_list?(wmf.sharOpenID=s[0].share_id,this.resetURL=new resetURL,this.resetURL.addEventListener(wmfEvent.REST_TAPE,this.getErr,this),this.addChild(this.resetURL)):(wmf._Name=s[0].name,wmf._cardlist=s[0].card_list.split(","),wmf._Time=s[0].share_id,wmf.openID=s[0].openid,this.newopenIdURL=new newopenIdURL,this.newopenIdURL.addEventListener(wmfEvent.SUB_MIT,this.getType,this),this.addChild(this.newopenIdURL)):this.getErr()},i.onGetIOError=function(t){console.log("get error : "+t)},i.onGetProgress=function(t){console.log("get progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")},i.getType=function(){var t=new wmfEvent(wmfEvent.TEXT_GET_TAPE);this.dispatchEvent(t)},i.getErr=function(){var t=new wmfEvent(wmfEvent.TEXT_GET_ERR);this.dispatchEvent(t)},e}(egret.DisplayObjectContainer);egret.registerClass(textgetURL,"textgetURL");var updateURL=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.sendUpdate,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.sendUpdate=function(){var t=document.getElementById("isphone").innerHTML,e=document.getElementById("openID").innerHTML,s=wmf._Time,i=String(wmf._cardlist);"true"==t&&(s=wmf._Phone,e=wmf._Phone);var r="?share_id="+s+"&card_list="+i+"&openid="+e,n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open("http://wmfh5apislb.createcdigital.com/wuser/update"+r,egret.HttpMethod.GET),n.send(),n.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),n.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this)},i.onGetComplete=function(t){var e=t.currentTarget,s=JSON.parse(e.response);"success"==s.result?(wmf.share=!1,this.updateType()):(wmf.share=!1,this.updatetErr())},i.onGetIOError=function(t){console.log("post error : "+t),this.updatetErr()},i.onGetProgress=function(t){console.log("post progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")},i.updateType=function(){var t=new wmfEvent(wmfEvent.SUB_MIT);this.dispatchEvent(t)},i.updatetErr=function(){var t=new wmfEvent(wmfEvent.SUB_MIT_ERR);this.dispatchEvent(t)},e}(egret.DisplayObjectContainer);egret.registerClass(updateURL,"updateURL");var wmf;!function(t){t._cardArr=[["three-3-1","three-4-1"],["three-3-2","three-4-2"],["three-3-3","three-4-3"],["three-3-4","three-4-4"],["three-3-5","three-4-5"]],t._cardAlert=["two-4-1","two-4-2","two-4-3","two-4-4","two-4-5"],t._cardlist=[0,0,0,0,0],t._cardXY=[[558,578],[0,169],[170,0],[0,636],[592,110]],t._card1XY=[[635,799],[60,342],[350,41],[60,775],[646,323]],t.share=!1,t._submit=!1}(wmf||(wmf={}));var wmf;!function(t){function e(t){var e=new egret.Bitmap,s=RES.getRes(t);return e.texture=s,e}function s(t){var e=RES.getRes(t+"_json"),s=RES.getRes(t+"_png"),i=new egret.MovieClipDataFactory(e,s),r=new egret.MovieClip(i.generateMovieClipData(t));return r}function i(t){var e=t,s=new egret.HttpRequest;s.responseType=egret.HttpResponseType.TEXT,s.open("http://wmfh5apislb.createcdigital.com/track/"+e,egret.HttpMethod.GET),s.send(),s.addEventListener(egret.Event.COMPLETE,function(t){t.currentTarget},this)}t.createBitmapByName=e,t.createMovieclip=s,t.tracking=i;var r=function(){function t(){}var e=(__define,t),s=e.prototype;return s.callEgretMethod=function(t){var e="share?"+t+"&out_trade="+egret.getOption("channel"),s=new egret.HttpRequest;s.responseType=egret.HttpResponseType.TEXT,s.open("http://wmfh5apislb.createcdigital.com/track/"+e,egret.HttpMethod.GET),s.send(),s.addEventListener(egret.Event.COMPLETE,function(t){t.currentTarget},this)},t}();t.shareFor=r,egret.registerClass(r,"wmf.shareFor");var n=function(e){function s(){e.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(s,e);var i=(__define,s),r=i.prototype;return r.onAddToStage=function(e){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup(t.loadgroup)},r.onResourceLoadComplete=function(e){e.groupName==t.loadgroup&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),t.loadtrue=t.loadgroup)},r.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},r.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},s}(egret.DisplayObjectContainer);t.loadResource=n,egret.registerClass(n,"wmf.loadResource");var h=function(e){function s(){e.call(this),this.loadingView=new LoadingUI,this.addChild(this.loadingView),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(s,e);var i=(__define,s),r=i.prototype;return r.onAddToStage=function(e){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup(t.loadgroup)},r.onResourceLoadComplete=function(e){e.groupName==t.loadgroup&&(this.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),t.loadtrue=t.loadgroup)},r.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},r.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},r.onResourceProgress=function(e){e.groupName==t.loadgroup&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},s}(egret.DisplayObjectContainer);t.loadSource=h,egret.registerClass(h,"wmf.loadSource")}(wmf||(wmf={}));var clickMusic=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.starloadMusic,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.starloadMusic=function(){var t=new egret.URLLoader;t.dataFormat=egret.URLLoaderDataFormat.SOUND,t.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this);var e=RES.getRes("tap").url,s=new egret.URLRequest(e);t.load(s)},i.onLoadComplete=function(t){var e=t.target,s=e.data;this.sound=s},i.starMuc=function(){var t=this.sound,e=this.soundChannel;e=t.play(0,1),e.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this.soundChannel=e},i.onSoundComplete=function(t){},e}(egret.DisplayObjectContainer);egret.registerClass(clickMusic,"clickMusic");var wmfEvent=function(t){function e(e,s,i){void 0===s&&(s=!1),void 0===i&&(i=!1),t.call(this,e,s,i)}__extends(e,t);var s=(__define,e);s.prototype;return e.TEST_STAR="test_star_event",e.SHAR_STAR="shar_star_eveng",e.MUSIC_STAR="music_star_event",e.SUB_MIT="sub_mit_event",e.SUB_MIT_ERR="sub_mit_err_event",e.GET_TAPE="get_tape_event",e.GET_ERR="get_err_event",e.GET_NONE="get_none_event",e.TEXT_GET_TAPE="text_get_type",e.TEXT_GET_ERR="text_get_err",e.REST_TAPE="rest_tape_event",e.REST_ERR="rest_err_event",e}(egret.Event);egret.registerClass(wmfEvent,"wmfEvent");var LoadingUI=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var s=(__define,e),i=s.prototype;return i.createView=function(){this.loading_bg=wmf.createBitmapByName("loading"),this.loading_mov=wmf.createBitmapByName("loading1"),this.textField=new egret.TextField,this.textField.x=342,this.textField.y=610,this.textField.textColor=8502885,this.textField.textAlign=egret.HorizontalAlign.CENTER,this.addChild(this.loading_bg),this.addChild(this.loading_mov),this.addChild(this.textField),this.loading_mov.anchorOffsetX=this.loading_mov.width/2,this.loading_mov.anchorOffsetY=this.loading_mov.height/2,this.loading_mov.x=256+this.loading_mov.width/2,this.loading_mov.y=452+this.loading_mov.height/2;var t=egret.Tween.get(this.loading_mov,{loop:!0});t.to({rotation:5},100).to({rotation:0},100).to({rotation:-5},100).to({rotation:0},100)},i.setProgress=function(t,e){var s=t/e*100;s=Math.floor(s),this.textField.text=s+"％"},e}(egret.DisplayObjectContainer);egret.registerClass(LoadingUI,"LoadingUI");var comeUI=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.onAddtoStage,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.stargame=function(){wmf.loadgroup==wmf.loadtrue&&this.removeEventListener(egret.Event.ENTER_FRAME,this.stargame,this)},i.onAddtoStage=function(){var t=egret.getOption("sharId"),e=document.getElementById("isphone").innerHTML;if("true"!==e)wmf.openID=document.getElementById("openID").innerHTML,null!==t&&""!==t?wmf.sharOpenID=t:wmf.sharOpenID=wmf.openID,this.getUrl=new getURL,this.getUrl.addEventListener(wmfEvent.GET_TAPE,this.getType,this),this.getUrl.addEventListener(wmfEvent.GET_ERR,this.getErr,this),this.getUrl.addEventListener(wmfEvent.GET_NONE,this.getNone,this),this.addChild(this.getUrl);else if(wmf.openID=t,null!==t&&""!==t){wmf.sharOpenID=t;var s="?sharId="+t+"&channel="+wmf.out_trade;shareChange(s),this.getUrl=new getURL,this.getUrl.addEventListener(wmfEvent.GET_TAPE,this.getType,this),this.getUrl.addEventListener(wmfEvent.GET_ERR,this.getErr,this),this.getUrl.addEventListener(wmfEvent.GET_NONE,this.getErr,this),this.addChild(this.getUrl)}else this.getErr()},i.getType=function(){var t="?sharId="+wmf.sharOpenID+"&channel="+wmf.out_trade;shareChange(t),this.getUrl.removeEventListener(wmfEvent.GET_TAPE,this.getType,this),this.removeChild(this.getUrl),wmf.openID!==wmf.sharOpenID&&(wmf.share=!0),wmf.loadgroup="game5";var e=new wmf.loadSource;this.addChild(e),this.addEventListener(egret.Event.ENTER_FRAME,this.stargame4,this)},i.stargame4=function(){wmf.loadgroup==wmf.loadtrue&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.stargame4,this),this.starShar())},i.getErr=function(){wmf.loadgroup="game1";var t=new wmf.loadSource;this.addChild(t),this.addEventListener(egret.Event.ENTER_FRAME,this.stargameg,this)},i.stargameg=function(){if(wmf.loadgroup==wmf.loadtrue){this.removeEventListener(egret.Event.ENTER_FRAME,this.stargameg,this);var t="?channel="+wmf.out_trade;shareChange(t),this.creatView()}},i.getNone=function(){wmf.openID==wmf.sharOpenID?this.getErr():(wmf.sharOpenID=wmf.openID,this.getUrl=new getURL,this.getUrl.addEventListener(wmfEvent.GET_TAPE,this.getType,this),this.getUrl.addEventListener(wmfEvent.GET_ERR,this.getErr,this),this.getUrl.addEventListener(wmfEvent.GET_NONE,this.getNone,this),this.addChild(this.getUrl))},i.creatView=function(){this._comeBg=wmf.createBitmapByName("first-1"),this._comeBtn=wmf.createBitmapByName("go"),this._comeText=wmf.createBitmapByName("first-3"),this._floopBtn=wmf.createBitmapByName("first-2"),this._comeBtn.x=227+this._comeBtn.width/2,this._comeBtn.y=1041+this._comeBtn.height/2,this._comeBtn.anchorOffsetX=this._comeBtn.width/2,this._comeBtn.anchorOffsetY=this._comeBtn.height/2,this._floopBtn.x=43,this._floopBtn.y=48,this._comeText.x=-361,this._comeText.y=228,this.addChild(this._comeBg),this.addChild(this._floopBtn),this.addChild(this._comeText),this.addChild(this._comeBtn);var t=egret.Tween.get(this._comeText);t.to({x:43},1e3);var t=egret.Tween.get(this._comeBtn,{loop:!0});t.to({scaleX:1.1,scaleY:1.1},500,egret.Ease.backInOut).to({scaleX:1,scaleY:1},500,egret.Ease.backOut),this._floopBtn.touchEnabled=!0,this._comeBtn.touchEnabled=!0,this._floopBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.createFlo,this),this._comeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.start,this),wmf.loadgroup="game2";var e=new wmf.loadResource;this.addChild(e),this.addEventListener(egret.Event.ENTER_FRAME,this.stargame,this)},i.createFlo=function(){this._floopBtn.touchEnabled=!1,this._comeBtn.touchEnabled=!1,this._floGroup=new egret.DisplayObjectContainer,this.addChild(this._floGroup),this._floBg=wmf.createBitmapByName("bg1"),this._floText=wmf.createBitmapByName("first-4"),this._floBgBtn=wmf.createBitmapByName("go"),this._floText.x=128,this._floText.y=242,this._floBgBtn.x=222+this._floBgBtn.width/2,this._floBgBtn.y=919+this._floBgBtn.height/2,this._floBgBtn.anchorOffsetX=this._floBgBtn.width/2,this._floBgBtn.anchorOffsetY=this._floBgBtn.height/2,this._floGroup.addChild(this._floBg),this._floGroup.addChild(this._floText),this._floGroup.addChild(this._floBgBtn);var t=egret.Tween.get(this._floBgBtn,{loop:!0});t.to({scaleX:1.1,scaleY:1.1},500,egret.Ease.backInOut).to({scaleX:1,scaleY:1},500,egret.Ease.backOut),this._floBg.touchEnabled=!0,this._floBgBtn.touchEnabled=!0,this._floBgBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jizhistar,this),this._floBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closs,this)},i.closs=function(){this._floBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closs,this),this.removeChild(this._floGroup),this._floopBtn.touchEnabled=!0,this._comeBtn.touchEnabled=!0},i.start=function(){this.testStar(),tracking("Cover Page","GO","标签1"),wmf.tracking("click?out_trade="+wmf.out_trade+"&type=click-startgame")},i.jizhistar=function(){this.testStar(),tracking("活动机制","GO","标签2"),wmf.tracking("click?out_trade="+wmf.out_trade+"&type=click-jzstartgame")},i.testStar=function(){var t=new wmfEvent(wmfEvent.TEST_STAR);this.dispatchEvent(t)},i.starShar=function(){var t=new wmfEvent(wmfEvent.SHAR_STAR);this.dispatchEvent(t)},e}(egret.DisplayObjectContainer);egret.registerClass(comeUI,"comeUI");var menuUI=function(t){function e(){t.call(this),this._writeR=[this._writeR1,this._writeR2,this._writeR3,this._writeR4,this._writeR5],this._writeX=[59,197.22,334.79,473.01,611.23],this.weizhi=[0,-750,-1500,-2250,-3e3],this.once(egret.Event.ADDED_TO_STAGE,this.onAddtoStage,this),wmf.loadgroup="game4";var e=new wmf.loadResource;this.addChild(e),this.addEventListener(egret.Event.ENTER_FRAME,this.stargame,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.stargame=function(){wmf.loadgroup==wmf.loadtrue&&this.removeEventListener(egret.Event.ENTER_FRAME,this.stargame,this)},i.onAddtoStage=function(){this._menuGroup=new egret.DisplayObjectContainer,this.addChild(this._menuGroup),this.clickMusic=new clickMusic,this.addChild(this.clickMusic),this._menuBg=wmf.createBitmapByName("bg"),this._Title=wmf.createBitmapByName("two-1"),this._Title.x=152,this._Title.y=48,this._menuGroup.addChild(this._menuBg),this._menuGroup.addChild(this._Title),this._round=wmf.createBitmapByName("round"),this._round.x=35,this._round.y=188,this._menuGroup.addChild(this._round);for(var t=0;5>t;t++)this._writeR[t]=new egret.Sprite,this._writeR[t].graphics.beginFill(16777215,1),this._writeR[t].graphics.drawRoundRect(this._writeX[t],209,80,80,90),this._writeR[t].graphics.endFill(),this._writeR[t].name=""+t,this._menuGroup.addChild(this._writeR[t]),this._writeR[t].touchEnabled=!0,this._writeR[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChange,this);this._greenR=new egret.Sprite,this._greenR.graphics.beginFill(6664517,1),this._greenR.graphics.drawRoundRect(49,199,100,100,100),this._greenR.graphics.endFill(),this._menuGroup.addChild(this._greenR),this._round1=wmf.createBitmapByName("round1"),this._round1.x=64,this._round1.y=228,this._menuGroup.addChild(this._round1),this.groupView()},i.groupView=function(){this.group=new egret.DisplayObjectContainer,this._menuGroup.addChild(this.group),this.bg=wmf.createBitmapByName("two-3-1"),this.bg.x=373,this.bg.y=404,this.bg.name="0",this.bg.anchorOffsetX=271,this.bg.anchorOffsetY=404,this.bg1=wmf.createBitmapByName("two-3-2"),this.bg1.x=1123,this.bg1.y=404,this.bg1.name="1",this.bg1.anchorOffsetX=271,this.bg1.anchorOffsetY=404,this.bg2=wmf.createBitmapByName("two-3-3"),this.bg2.x=1873,this.bg2.y=404,this.bg2.name="2",this.bg2.anchorOffsetX=271,this.bg2.anchorOffsetY=404,this.bg3=wmf.createBitmapByName("two-3-4"),this.bg3.x=2623,this.bg3.y=404,this.bg3.name="3",this.bg3.anchorOffsetX=271,this.bg3.anchorOffsetY=404,this.bg4=wmf.createBitmapByName("two-3-5"),this.bg4.x=3373,this.bg4.y=404,this.bg4.name="4",this.bg4.anchorOffsetX=271,this.bg4.anchorOffsetY=404;var t=new egret.Sprite;t.graphics.beginFill(0,0),t.graphics.drawRect(5*this.bg.width+204,0,102,102),t.graphics.endFill(),this.group.addChild(this.bg),this.group.addChild(this.bg1),this.group.addChild(this.bg2),this.group.addChild(this.bg3),this.group.addChild(this.bg4),this.group.addChild(t),this.bg.touchEnabled=!0,this.bg1.touchEnabled=!0,this.bg2.touchEnabled=!0,this.bg3.touchEnabled=!0,this.bg4.touchEnabled=!0,this.bg.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.bg1.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.bg2.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.bg3.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.bg4.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.group.x=0,this.group.y=357},i.onChange=function(t){var e=Number(t.target.name);this._greenR.x=this._writeX[e]-59,this.clickMusic.starMuc();var s=egret.Tween.get(this.group);s.to({x:this.weizhi[e]},500)},i.touchEnd=function(t){wmf._CardNum=Number(t.target.name),wmf._Card=wmf._cardAlert[wmf._CardNum],this.showCard(wmf._Card)},i.showCard=function(t){this.bg.touchEnabled=!1,this.bg1.touchEnabled=!1,this.bg2.touchEnabled=!1,this.bg3.touchEnabled=!1,this.bg4.touchEnabled=!1;for(var e=0;5>e;e++)this._writeR[e].touchEnabled=!1;this._showGroup=new egret.DisplayObjectContainer,this.addChild(this._showGroup),this._showBg=wmf.createBitmapByName("bg3"),this._showTitle=wmf.createBitmapByName("two-5"),this._showCard=wmf.createBitmapByName(t),this._showBtn=wmf.createBitmapByName("go"),this._showClose=wmf.createBitmapByName("closs"),this._showTitle.x=245,this._showTitle.y=191,this._showCard.x=106,this._showCard.y=283,this._showBtn.x=227+this._showBtn.width/2,this._showBtn.y=950+this._showBtn.height/2,this._showBtn.anchorOffsetX=this._showBtn.width/2,this._showBtn.anchorOffsetY=this._showBtn.height/2,this._showClose.x=618,this._showClose.y=156,this._showGroup.addChild(this._showBg),this._showGroup.addChild(this._showTitle),this._showGroup.addChild(this._showCard),this._showGroup.addChild(this._showBtn),this._showGroup.addChild(this._showClose),this._showBg.touchEnabled=!0,this._showBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closs,this),this._showCard.touchEnabled=!0,this._showCard.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){this._showBg.touchEnabled=!1},this),this._showCard.addEventListener(egret.TouchEvent.TOUCH_END,function(){this._showBg.touchEnabled=!0},this),this._showBtn.touchEnabled=!0,this._showBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickOk,this);var s=egret.Tween.get(this._showBtn,{loop:!0});s.to({scaleX:1.1,scaleY:1.1},500,egret.Ease.backInOut).to({scaleX:1,scaleY:1},500,egret.Ease.backOut)},i.closs=function(){this.removeChild(this._showGroup),this.bg.touchEnabled=!0,this.bg1.touchEnabled=!0,this.bg2.touchEnabled=!0,this.bg3.touchEnabled=!0,this.bg4.touchEnabled=!0;for(var t=0;5>t;t++)this._writeR[t].touchEnabled=!0},i.clickOk=function(){wmf._cardlist[wmf._CardNum]=1,this.updateURL=new updateURL,this.updateURL.addEventListener(wmfEvent.SUB_MIT,this.updateType,this),this.updateURL.addEventListener(wmfEvent.SUB_MIT_ERR,this.updateErr,this),this._showGroup.addChild(this.updateURL),tracking("confirm dish","确认并领红包","标签4")},i.updateType=function(){this._showBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickOk,this),this.removeChild(this._showGroup),this.removeChild(this._menuGroup);var t=document.getElementById("isphone").innerHTML;if(wmf.tracking("click?out_trade="+wmf.out_trade+"&type=click-menu"+wmf._CardNum),"true"==t){var e="http://www.createcdigital.com/wmfh520160830/index.php?sharId="+wmf._Phone+"&channel="+wmf.out_trade;window.location.href=e}else{var s=new shareUI;s.shareView(),this.addChild(s);var i="?sharId="+wmf.openID+"&channel="+wmf.out_trade;shareChange(i)}},i.updateErr=function(){this.bg.touchEnabled=!0,this.bg1.touchEnabled=!0,this.bg2.touchEnabled=!0,this.bg3.touchEnabled=!0,this.bg4.touchEnabled=!0;for(var t=0;5>t;t++)this._writeR[t].touchEnabled=!0;wmf._cardlist[wmf._CardNum]=0,this.updateURL.removeEventListener(wmfEvent.SUB_MIT,this.updateType,this),this.updateURL.removeEventListener(wmfEvent.SUB_MIT_ERR,this.updateErr,this),this._showGroup.removeChild(this.updateURL)},e}(egret.DisplayObjectContainer);egret.registerClass(menuUI,"menuUI");var musicUI=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.startLoad,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.startLoad=function(){var t=new egret.URLLoader;t.dataFormat=egret.URLLoaderDataFormat.SOUND,t.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this);var e=RES.getRes("mp3").url,s=new egret.URLRequest(e);t.load(s)},i.onLoadComplete=function(t){var e=t.target,s=e.data;this.sound=s,this._muc=wmf.createBitmapByName("music"),this._muc.anchorOffsetX=this._muc.width/2,this._muc.x=685.5,this._muc.anchorOffsetY=this._muc.height/2,this._muc.y=43.5,this.addChild(this._muc),this._muc.touchEnabled=!0,this._muc.addEventListener(egret.TouchEvent.TOUCH_TAP,this.starMuc,this),this.starMuc()},i.round=function(){this._muc.rotation+=3},i.starMuc=function(){var t=this.sound,e=this.soundChannel;egret.Tween.get(this._muc);return e?(e.stop(),this.soundChannel=null,this._muc.rotation=0,void this.removeEventListener(egret.Event.ENTER_FRAME,this.round,this)):(this._muc.rotation=15,this.addEventListener(egret.Event.ENTER_FRAME,this.round,this),e=t.play(0,-1),e.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),void(this.soundChannel=e))},i.onSoundComplete=function(t){},e}(egret.DisplayObjectContainer);egret.registerClass(musicUI,"musicUI");var shareUI=function(t){function e(){t.call(this),this.table=[this.table1,this.table2,this.table3,this.table4,this.table5],this.tables=[this.tables1,this.tables2,this.tables3,this.tables4,this.tables5],this.isreturn=!0}__extends(e,t);var s=(__define,e),i=s.prototype;return i.shareView=function(){for(var t=0,e=0;5>e;e++)1==wmf._cardlist[e]&&(t+=1);5==t?this.overpage():this.creatView()},i.overpage=function(){var t=wmf.createBitmapByName("finish");this.addChild(t),wmf.openID==wmf.sharOpenID?(this.finishTex=wmf.createBitmapByName("finish-my"),this.againBtn=wmf.createBitmapByName("finish-restar"),this.againBtn.x=227,this.againBtn.y=1041,document.getElementById("qr").style.display="block",this.addChild(this.finishTex),this.addChild(this.againBtn),this.againBtn.touchEnabled=!0,this.againBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.nextBtn(2)},this)):(this.finishTex=wmf.createBitmapByName("finish-other"),this.againBtn=wmf.createBitmapByName("ljxd-btn"),this.againBtn.x=227,this.againBtn.y=1041,this.addChild(this.finishTex),this.addChild(this.againBtn),this.againBtn.touchEnabled=!0,this.againBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.resetType(),tracking("Table Full","立即行动","标签7"),wmf.tracking("click?out_trade="+wmf.out_trade+"&type=click-ljxd")
},this))},i.creatView=function(){this._shareGroup=new egret.DisplayObjectContainer,this.addChild(this._shareGroup),this._shareBg=wmf.createBitmapByName("three-bg"),this._shareGroup.addChild(this._shareBg),wmf.openID==wmf.sharOpenID?(this.myPage(),this._shareBg.touchEnabled=!0,this._shareBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openShare,this)):this.otherPage()},i.myPage=function(){this._shareTitle=wmf.createBitmapByName("three-1"),this._shareTitle.x=240,this._shareTitle.y=199,this._shareTitle1=new egret.TextField,this._shareTitle1.y=257,this._shareTitle1.width=750,this._shareTitle1.textAlign=egret.HorizontalAlign.CENTER,this._shareTitle1.size=35,this._shareTitle1.bold=!0,this._shareName=new egret.TextField,this._shareName.y=305,this._shareName.width=750,this._shareName.textAlign=egret.HorizontalAlign.CENTER,this._shareName.size=33,this._shareName.bold=!0,this._shareBtn1=wmf.createBitmapByName("yqhl-btn"),this._shareBtn1.x=227+this._shareBtn1.width/2,this._shareBtn1.y=920+this._shareBtn1.height/2,this._shareBtn1.anchorOffsetX=this._shareBtn1.width/2,this._shareBtn1.anchorOffsetY=this._shareBtn1.height/2,this._shareBtn2=wmf.createBitmapByName("again-btn"),this._shareBtn2.x=75,this._shareBtn2.y=1031,this._shareBtn3=wmf.createBitmapByName("gd-btn"),this._shareBtn3.x=401,this._shareBtn3.y=1031,this._shareGroup.addChild(this._shareTitle),this._shareGroup.addChild(this._shareName),this._shareGroup.addChild(this._shareTitle1),this._shareGroup.addChild(this._shareBtn1),this._shareGroup.addChild(this._shareBtn2),this._shareGroup.addChild(this._shareBtn3),this._shareBtn1.touchEnabled=!0,this._shareBtn2.touchEnabled=!0,this._shareBtn3.touchEnabled=!0,this._shareBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openShare,this),this._shareBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.nextBtn(2)},this),this._shareBtn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openBtn,this);var t=egret.Tween.get(this._shareBtn1,{loop:!0});t.to({scaleX:1.1,scaleY:1.1},500,egret.Ease.backInOut).to({scaleX:1,scaleY:1},500,egret.Ease.backOut);for(var e=0,s=0;5>s;s++)0==wmf._cardlist[s]&&(e+=1);this._shareTitle1.text=wmf._Name+"的团圆饭\n",this._shareName.text="  还差"+e+"人，需要更多人气",this.createTable();var t=egret.Tween.get(this._shareName,{loop:!0});t.to({textColor:16777215},500).to({textColor:14430770},10).to({textColor:14430770},500).to({textColor:16777215},10),this.timer2=new egret.Timer(500,0),this.timer2.addEventListener(egret.TimerEvent.TIMER,this.restarTimer,this),this.timer2.start()},i.otherPage=function(){this._shareName=new egret.TextField,this._shareName.y=280,this._shareName.width=750,this._shareName.textAlign=egret.HorizontalAlign.CENTER,this._shareName.size=33,this._shareName.bold=!0,this._shareTitle1=new egret.TextField,this._shareTitle1.width=750,this._shareTitle1.textAlign=egret.HorizontalAlign.CENTER,this._shareTitle1.y=240,this._shareTitle1.size=35,this._shareTitle1.bold=!0,this._shareTitle=wmf.createBitmapByName("three-5"),this._shareTitle.x=205,this._shareTitle.y=891,this._shareBtn2=wmf.createBitmapByName("againtoo-btn"),this._shareBtn2.x=75,this._shareBtn2.y=1031,this._shareBtn3=wmf.createBitmapByName("gd-btn"),this._shareBtn3.x=401,this._shareBtn3.y=1031,this._shareGroup.addChild(this._shareTitle),this._shareGroup.addChild(this._shareName),this._shareGroup.addChild(this._shareTitle1),this._shareGroup.addChild(this._shareBtn2),this._shareGroup.addChild(this._shareBtn3),this._shareBtn2.touchEnabled=!0,this._shareBtn3.touchEnabled=!0,this._shareBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.nextBtn(1)},this),this._shareBtn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openBtn,this);for(var t=0,e=0;5>e;e++)0==wmf._cardlist[e]&&(t+=1);this._shareTitle1.text=wmf._Name+"的团圆饭",this._shareName.text="  还差"+t+"人,需要更多人气\n快帮TA点菜",this.createOtherTable();var s=egret.Tween.get(this._shareName,{loop:!0});s.to({textColor:16777215},500).to({textColor:14430770},10).to({textColor:14430770},500).to({textColor:16777215},10),this.timer2=new egret.Timer(500,0),this.timer2.addEventListener(egret.TimerEvent.TIMER,this.restarTimer,this),this.timer2.start()},i.restarTimer=function(){this.getURL=new getURL,this.getURL.addEventListener(wmfEvent.GET_TAPE,this.getType,this),this.addChild(this.getURL)},i.getType=function(){this.getURL.removeEventListener(wmfEvent.GET_TAPE,this.getType,this),this.removeChild(this.getURL);for(var t=0,e=0;5>e;e++)0==wmf._cardlist[e]&&(t+=1);0==t?(this.timer2.stop(),this.onTapCloss(),this.removeChild(this.tablesGroup),this.removeChild(this._shareGroup),this.overpage()):wmf.openID==wmf.sharOpenID?this.isreturn&&(this._shareName.text="  还差"+t+"人,需要更多人气",this.removeChild(this.tablesGroup),this.createTable()):this.isreturn&&(this._shareName.text="  还差"+t+"人,需要更多人气\n快帮TA点菜",this.removeChild(this.tablesGroup),this.createOtherTable())},i.createTable=function(){this.tablesGroup=new egret.DisplayObjectContainer,this.addChild(this.tablesGroup);for(var t=0;5>t;t++)this.table[t]=wmf.createBitmapByName(wmf._cardArr[t][0]),this.tables[t]=wmf.createBitmapByName(wmf._cardArr[t][1]),this.table[t].x=wmf._cardXY[t][0],this.tables[t].x=wmf._card1XY[t][0],this.table[t].y=wmf._cardXY[t][1],this.tables[t].y=wmf._card1XY[t][1],this.table[t].name=""+t,this.tables[t].name=""+t,1==wmf._cardlist[t]&&this.tablesGroup.addChild(this.table[t])},i.createOtherTable=function(){this.tablesGroup=new egret.DisplayObjectContainer,this.addChild(this.tablesGroup);for(var t=0;5>t;t++)this.table[t]=wmf.createBitmapByName(wmf._cardArr[t][0]),this.tables[t]=wmf.createBitmapByName(wmf._cardArr[t][1]),this.table[t].x=wmf._cardXY[t][0],this.tables[t].x=wmf._card1XY[t][0],this.table[t].y=wmf._cardXY[t][1],this.tables[t].y=wmf._card1XY[t][1],this.table[t].name=""+t,this.tables[t].name=""+t,this.table[t].touchEnabled=!0,this.table[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.tapTable,this),this.tables[t].touchEnabled=!0,this.tables[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickOk,this),1==wmf._cardlist[t]?this.tablesGroup.addChild(this.table[t]):this.tablesGroup.addChild(this.tables[t])},i.tapTable=function(t){if(wmf.share){var e=Number(t.target.name);1==wmf._cardlist[e]?this.isRepeat(1):(wmf._CardNum=e,wmf._Card=wmf._cardAlert[wmf._CardNum])}else this.isRepeat(2)},i.clickOk=function(t){wmf._CardNum=t.target.name,wmf._cardlist[wmf._CardNum]=1,this.updateURL=new updateURL,this.updateURL.addEventListener(wmfEvent.SUB_MIT,this.updateType,this),this.updateURL.addEventListener(wmfEvent.SUB_MIT_ERR,this.updateErr,this),this.addChild(this.updateURL)},i.updateType=function(){this.openTap(),this.tablesGroup.removeChild(this.tables[wmf._CardNum]),this.tablesGroup.addChild(this.table[wmf._CardNum]),wmf._cardlist[wmf._CardNum]=1;for(var t=0,e=0;5>e;e++)0==wmf._cardlist[e]&&(t+=1);this._shareName.text="还差"+t+"人,需要更多人气\n快帮TA点菜",0==t&&(this.removeChild(this._shareGroup),this.overpage())},i.updateErr=function(){wmf._cardlist[wmf._CardNum]=0,this.updateURL.removeEventListener(wmfEvent.SUB_MIT,this.updateType,this),this.updateURL.removeEventListener(wmfEvent.SUB_MIT_ERR,this.updateErr,this),this.isRepeat(2)},i.isRepeat=function(t){this.onTapCloss(),this._repeatGroup=new egret.DisplayObjectContainer,this.addChild(this._repeatGroup),this._repeatBg=wmf.createBitmapByName("bg2"),1==t?(this._repeatBg1=wmf.createBitmapByName("isRepeat"),this._repeatBg1.x=209,this._repeatBg1.y=527):(this._repeatBg1=wmf.createBitmapByName("isOnce"),this._repeatBg1.x=231,this._repeatBg1.y=527),this._repeatGroup.addChild(this._repeatBg),this._repeatGroup.addChild(this._repeatBg1),this._repeatBg.touchEnabled=!0,this._repeatBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.repeatCloss,this),this._repeatBg1.touchEnabled=!0,this._repeatBg1.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){this._repeatBg.touchEnabled=!1},this),this._repeatBg1.addEventListener(egret.TouchEvent.TOUCH_END,function(){this._repeatBg.touchEnabled=!0},this)},i.repeatCloss=function(){this._repeatBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.repeatCloss,this),this.removeChild(this._repeatGroup),this.openTap()},i.nextBtn=function(t){for(var e=0,s=0;5>s;s++)1==wmf._cardlist[s]&&(e+=1);if(5!==e&&this.timer2.stop(),wmf.openID!==wmf.sharOpenID){var i=new Date,r=i.getTime(),n="http://www.createcdigital.com/wmfh520160830/index.php?channel="+wmf.out_trade+"&r="+r;location.href=n}else this.resetURL=new resetURL,this.resetURL.addEventListener(wmfEvent.REST_TAPE,this.resetType,this),this.addChild(this.resetURL);switch(t){case 1:wmf.tracking("click?out_trade="+wmf.out_trade+"&type=click-wyyw"),tracking("view status","我也要玩","标签5");break;case 2:wmf.tracking("click?out_trade="+wmf.out_trade+"&type=click-cxkz"),tracking("Table Full","重新开桌","标签8")}},i.resetType=function(){var t=new Date,e=t.getTime(),s="http://www.createcdigital.com/wmfh520160830/index.php?channel="+wmf.out_trade+"&r="+e;window.location.href=s},i.openBtn=function(){document.getElementById("gzpng").style.display="block",document.getElementById("redtext").style.display="block",this.onTapCloss(),this._concernGroup=new egret.DisplayObjectContainer,this.addChild(this._concernGroup),this._conBg=wmf.createBitmapByName("bg3"),this._conBg1=wmf.createBitmapByName("redpag"),this._conMor=wmf.createBitmapByName("gz-text"),this._conBg1.x=161,this._conBg1.y=199,this._conMor.x=297,this._conMor.y=965,this._concernGroup.addChild(this._conBg),this._concernGroup.addChild(this._conBg1),this._concernGroup.addChild(this._conMor),this._conBg.touchEnabled=!0,this._conBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.conCloss,this),this._conBg1.touchEnabled=!0,this._conBg1.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){this._conBg.touchEnabled=!1},this),this._conBg1.addEventListener(egret.TouchEvent.TOUCH_END,function(){this._conBg.touchEnabled=!0},this),wmf.tracking("click?out_trade="+wmf.out_trade+"&type=click-guanzhu"),tracking("view status","更多惊喜","标签6")},i.conCloss=function(){document.getElementById("gzpng").style.display="none",document.getElementById("redtext").style.display="none",this._conBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.conCloss,this),this.removeChild(this._concernGroup),this.openTap()},i.openShare=function(){this.onTapCloss(),this._openSBg=wmf.createBitmapByName("share-bg"),this.addChild(this._openSBg),this._openSBg.touchEnabled=!0,this._openSBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareClose,this),this._openText=new egret.TextField,this._openText.x=320,this._openText.y=471,this._openText.textColor=0,this.addChild(this._openText);for(var t=0,e=0;5>e;e++)0==wmf._cardlist[e]&&(t+=1);this._openText.text=""+t,wmf.tracking("click?out_trade="+wmf.out_trade+"&type=click-haoli"),tracking("view status","赢取豪礼","标签9")},i.shareClose=function(){this.openTap(),this.removeChild(this._openSBg),this.removeChild(this._openText)},i.onTapCloss=function(){this.isreturn=!1,this.timer2.stop(),this._shareBtn2.touchEnabled=!1,this._shareBtn3.touchEnabled=!1;for(var t=0;5>t;t++)this.table[t].touchEnabled=!1,this.tables[t].touchEnabled=!1},i.openTap=function(){this.isreturn=!0,this.timer2.start(),this._shareBtn2.touchEnabled=!0,this._shareBtn3.touchEnabled=!0;for(var t=0;5>t;t++)this.table[t].touchEnabled=!0,this.tables[t].touchEnabled=!0},e}(egret.DisplayObjectContainer);egret.registerClass(shareUI,"shareUI");var textUI=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.onAddtoStage,this),wmf.loadgroup="game3";var e=new wmf.loadResource;this.addChild(e),this.addEventListener(egret.Event.ENTER_FRAME,this.stargame,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.stargame=function(){wmf.loadgroup==wmf.loadtrue&&this.removeEventListener(egret.Event.ENTER_FRAME,this.stargame,this)},i.onAddtoStage=function(){this.table()},i.table=function(){this._tableGroup=new egret.DisplayObjectContainer,this.addChild(this._tableGroup),this.bg=wmf.createBitmapByName("bg"),this._tableBg=wmf.createBitmapByName("bg1"),this._tableBg_1=wmf.createBitmapByName("name"),this._tableBtn=wmf.createBitmapByName("go"),this._tableBg_1.x=198,this._tableBg_1.y=242,this._tableBtn.x=227+this._tableBtn.width/2,this._tableBtn.y=940+this._tableBtn.height/2,this._tableBtn.anchorOffsetX=this._tableBtn.width/2,this._tableBtn.anchorOffsetY=this._tableBtn.height/2,this._tableGroup.addChild(this.bg),this._tableGroup.addChild(this._tableBg),this._tableGroup.addChild(this._tableBg_1),this._tableGroup.addChild(this._tableBtn),this._tablePhone=new egret.TextField,this._tableName=new egret.TextField,this._tablePhone.type=this._tableName.type=egret.TextFieldType.INPUT,this._tablePhone.width=this._tableName.width=300,this._tablePhone.height=this._tableName.height=36,this._tableName.x=this._tablePhone.x=250,this._tableName.y=672,this._tablePhone.y=794,this._tablePhone.maxChars=11,this._tableName.maxChars=8,this._tablePhone.textColor=this._tableName.textColor=0,this._tableGroup.addChild(this._tableName),this._tableGroup.addChild(this._tablePhone),this._tableBtn.touchEnabled=!0,this._tableBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tablePost,this);var t=egret.Tween.get(this._tableBtn,{loop:!0});t.to({scaleX:1.1,scaleY:1.1},500,egret.Ease.backInOut).to({scaleX:1,scaleY:1},500,egret.Ease.backOut),this._tablePoint=new egret.TextField,this._tablePoint.textColor=16711680,this._tablePoint.x=201,this._tablePoint.y=847,this._tableGroup.addChild(this._tablePoint)},i.tablePost=function(){function t(){var t,e=32,s=16,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];if(s=s||i.length,e)for(t=0;e>t;t++)r[t]=i[0|Math.random()*s];else{var n;for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",t=0;36>t;t++)r[t]||(n=0|16*Math.random(),r[t]=i[19==t?3&n|8:n])}return r.join("")}var e=this._tableName.text,s=this._tablePhone.text,i=/^1[3,4,5,8]\d{9}$/;if(""==e&&""==s)this._tablePoint.text="＊请填写你姓名和手机号";else if(i.test(s)){this._tableBtn.touchEnabled=!1;var r=t();wmf._Time=(new Date).getTime()+""+r,wmf._Name=e,wmf._Phone=s,this._tablePoint.text="＊数据正在提交，请稍后",this.textgetURL=new textgetURL,this.textgetURL.addEventListener(wmfEvent.TEXT_GET_TAPE,this.textgetType,this),this.textgetURL.addEventListener(wmfEvent.TEXT_GET_ERR,this.textgetErr,this),this.addChild(this.textgetURL)}else this._tablePoint.text="＊请输入正确的11位电话号码";tracking("data acquisition","GO","标签3")},i.textgetType=function(){var t=document.getElementById("isphone").innerHTML;if("true"==t){var e="http://www.createcdigital.com/wmfh520160830/index.php?sharId="+wmf.openID+"&channel="+wmf.out_trade;window.location.href=e}else{wmf.loadgroup="game4";var s=new wmf.loadResource;this.addChild(s),this.addEventListener(egret.Event.ENTER_FRAME,this.stargame4,this)}},i.textgetErr=function(){this.postTable()},i.postTable=function(){this.postUrl=new postURL,this.postUrl.addEventListener(wmfEvent.SUB_MIT,this.postType,this),this.postUrl.addEventListener(wmfEvent.SUB_MIT_ERR,this.postErr,this),this._tableGroup.addChild(this.postUrl)},i.postType=function(){wmf.tracking("click?out_trade="+wmf.out_trade+"&type=click-submit"),this.postUrl.removeEventListener(wmfEvent.GET_TAPE,this.postType,this),this.postUrl.removeEventListener(wmfEvent.SUB_MIT_ERR,this.postErr,this),this._tableGroup.removeChild(this.postUrl),this.tableClose()},i.postErr=function(){this._tableBtn.touchEnabled=!0,this.postUrl.removeEventListener(wmfEvent.GET_TAPE,this.postType,this),this.postUrl.removeEventListener(wmfEvent.SUB_MIT_ERR,this.postErr,this),this._tableGroup.removeChild(this.postUrl),this._tablePoint.text="＊提交失败，请刷新页面"},i.tableClose=function(){this.removeChild(this._tableGroup);var t=new menuUI;this.addChild(t)},i.stargame4=function(){if(wmf.loadgroup==wmf.loadtrue){this.removeEventListener(egret.Event.ENTER_FRAME,this.stargame4,this),this.removeChild(this._tableGroup);var t="?sharId="+wmf.openID+"&channel="+wmf.out_trade;shareChange(t);var e=new shareUI;e.shareView(),this.addChild(e)}},e}(egret.DisplayObjectContainer);egret.registerClass(textUI,"textUI");